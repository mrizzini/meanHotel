<!--HTML template that is loaded when user clicks on a hotel-->

<h1>{{ vm.hotel.name }} <hotel-rating stars="vm.stars"></hotel-rating></h1> <!-- this uses the hotel-rating element we created in our custom directive -->
<p><small>{{vm.hotel.location.address}}</small></p>

<p>{{ vm.hotel.description }}</p>
<p>This hotel offers the following services:</p>

<ul>
    <li ng-repeat="service in vm.hotel.services">{{ service }}</li>
</ul>

<h3>Reviews</h3>
<ul>
    <li ng-repeat="review in vm.hotel.reviews">{{ review.name }} says: {{ review.review }}</li>
</ul>

<div ng-if="vm.isLoggedIn()"> <!-- this form will be visible if user is logged in in hotel-display cotroller -->
<form name="vm.reviewForm" ng-submit="vm.addReview()">
    <!--Your name: <input type="text" name="name" required ng-minlength="2" ng-model="vm.name">-->
    <!--<div ng-show="vm.reviewForm.name.$dirty && vm.reviewForm.name.$invalid && vm.isSubmitted">-->
    <!--    <p>Name should be more than 2 characters long</p>-->
    <!--</div>-->
    <!--dont need this now that we get name from jwtHelper in addReview in hotel-display-controller-->
    
    Your rating: <input type="number" name="rating" required ng-pattern="/^[1-5]$/" ng-model="vm.rating">
    <div ng-show="vm.reviewForm.rating.$dirty && vm.reviewForm.rating.$invalid && vm.isSubmitted">
        <p>Rating must be between 1-5.</p>
    </div>
    
    Your review: <textarea name="review" required ng-model="vm.review"></textarea>
    <div ng-show="vm.reviewForm.$dirty && vm.isSubmitted">
        <p>Please add a review</p>
    </div>
    
    <button type="submit">Add review</button>
</form>
</div>